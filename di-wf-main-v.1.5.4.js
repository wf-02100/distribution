           </div>`);let n=t.querySelector("input"),i=r?.querySelector('[id="suggested-search-result-wrapper"]'),a=r?.querySelector('[id="suggested-search-result-mount"]'),o=r?.querySelector('[id="suggested-search-result-template"]')?.cloneNode(!0),s=this.#i;s.suggestedSearchInput=n,s.suggestedSearchResultsWrapper=i,s.suggestedSearchResultsMount=a,s.suggestedSearchResultsTemplate=o}};let r1=!1,r2=!0;const r3=[{code:"be",prettyName:"Berlin",searchStr:"berlin "},{code:"by",prettyName:"Bayern",searchStr:"bayern bavaria"},{code:"bw",prettyName:"Baden-W\xfcrttemberg",searchStr:"baden w\xfcrttemberg"},{code:"hh",prettyName:"Hamburg",searchStr:"hamburg hanse stadt "},{code:"hb",prettyName:"Bremen",searchStr:"bremen"},{code:"he",prettyName:"Hessen",searchStr:"hessen"},{code:"mv",prettyName:"Mecklenburg-Vorpommern",searchStr:"mecklenburg vorpommern"},{code:"ni",prettyName:"Niedersachsen",searchStr:"niedersachsen"},{code:"nw",prettyName:"Nordrhein-Westfalen",searchStr:"nordrhein westfalen nrw North Rhine Westphalia"},{code:"rp",prettyName:"Rheinland-Pfalz",searchStr:"rheinland pfalz"},{code:"sl",prettyName:"Saarland",searchStr:"saarland"},{code:"sn",prettyName:"Sachsen",searchStr:"sachsen"},{code:"st",prettyName:"Sachsen-Anhalt",searchStr:"sachsen anhalt"},{code:"sh",prettyName:"Schleswig-Holstein",searchStr:"schleswig holstein"},{code:"th",prettyName:"Th\xfcringen",searchStr:"th\xfcringen"},{code:"bb",prettyName:"Brandenburg",searchStr:"brandenburg"}];var r5=new class{#Y(e=0,t=!1,r=()=>{}){r2||this.#n.showLoadingWheel();let n=this,i=!1,a="";if((n.#G[0]?.getAttribute("data-search-path")||"/immobilien")===location.pathname||(n.#G[0]?.getAttribute("data-search-path")||"/immobilien")+"/"===location.pathname);else{let e=document.querySelector(`[data-search-path="${location.pathname}"]`),t=e?.getAttribute("di-filter-type")||"";if(!e||""===t)throw Error(`filterView.ts: Couldn't find [data-search-path="${location.pathname}"] and/or 'di-filter-type' equals ''`);i=!0,a=t}let o="";r2&&(r2=!1,i&&(o=a,0===this.#Q.length&&n.#Q.push(a)));let s=document.querySelector('[di-filter="location"]')?.getAttribute("data-value")||"",l=document.querySelector('[di-filter="location"]')?.getAttribute("data-city-value")||"",c=document.querySelector('[di-filter="location"]')?.getAttribute("data-state-code-value")||"",u=`${""!==s||""!==l?`?plz=${s}&stadt=${l}&bundeslaender=${c}`:`?bundeslaender=${c}`}&ueberspringen=${e}&art=${""!==o?o:this.#Q.join(",")}&sortieren=${this.#J}&preis-von=${isNaN(this.#Z.from)?"":this.#Z.from}&preis-bis=${isNaN(this.#Z.to)?"":this.#Z.to}&zins-von=${isNaN(this.#X.from)?"":this.#X.from}&zins-bis=${isNaN(this.#X.to)?"":this.#X.to}&umkreis=${""!==s?this.#K:""}`,d=location.pathname,h=document.querySelector('[di-filter="reset-all"]')?.getAttribute("data-search-path")||location.pathname;if(""!==o||1===this.#Q.length){let e=document.querySelector(`[di-filter-type="${""!==o?o:this.#Q[0]}"]`);if(!e){console.warn("Potential Error: filterView.ts -> #filterMain -> Click filter type buttons: button = ",e);return}h=e.getAttribute("data-search-path")||h}let p=rI(`${location.origin+h+u}`),m=p;if(i&&1===n.#Q.length){let e=`${location.origin+h+new URL(p).search.replace(a,"")}`;m=rI(e)}let f=new URL(p),g=new URLSearchParams(f.search);g.delete("sortieren");let y=0;g.forEach(e=>y++),0===y?n.#G.forEach(e=>e.classList.add("di-reset-all-filters-inactive")):n.#G.forEach(e=>e.classList.remove("di-reset-all-filters-inactive")),0===e&&this.#n.resetNumberOfSkippings(t),t||this.#n.clearObjectComparisonBar(),t&&r(),t||(async()=>{try{let e=await n.#n.getSearchObjectData(u,n.#ee);if(n.#n.renderLoop(e),e.length>n.#o&&e.pop(),n.#n.updateMarkers(e),""!==s&&""!==l){r1=!0;let e=document.querySelector('[di-filter="radius"]');e.value=n.#K+"km",r1=!1,n.#n.updateRegions(c,"zip")}else{r1=!0;let e=document.querySelector('[di-filter="radius"]');e.value="",r1=!1,n.#n.updateRegions(c,"standard")}}catch(e){throw"FilterView -> #filterMain -> (async () => {})(): "+e}})(),h===d&&window.history.replaceState("","",m),h!==d&&(history.replaceState("","",location.href),setTimeout(()=>{setTimeout(this.#n.showLoadingWheel,10),n.#et&&n.#et.classList.add("di-filter-page-reload"),sessionStorage.setItem("scrollPosition",window.scrollY.toString()),location.href=m},0))}#Q;#J;#Z;#X;#er;#K;#en;init(e){let t=sessionStorage.getItem("scrollPosition");null!==t&&(window.scrollTo(0,parseInt(t)),sessionStorage.removeItem("scrollPosition")),this.#t=e.styles,this.#r=e.objects,this.#n=e.handlers,this.#B=e.urlParams,this.#et=document.querySelector('[di-filter="parent-component"]'),this.#G=document.querySelectorAll('[di-filter="reset-all"]'),this.#K=this.#t.searchRadiusDefault,this.#i=e.elements,this.#ee=this.#i.objectLists.length,this.#o=this.#t.numberOfObjectsPerList*this.#ee,r0.init(e,".c-object_filter-search",!1),this.#z(),this.#ei(),this.#ea(),setTimeout(function(){r2=!1},500)}#o;#ee;#et;#G;#t;#i;#r;#n;#B;#ea(){let e=this.#B,t=this,r=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",maximumFractionDigits:0});this.#J=e.sort,this.#K=e.radius,this.#er=e.states;let n=document.querySelector('[di-filter="sort"]');n.value=e.sort;let i=document.querySelector('[di-filter="radius"]');""!==e.zip?(r1=!0,i.value=e.radius+"km"):(r1=!0,i.value=""),r1=!1,this.#eo(),[{str:"from",name:"minPrice"},{str:"to",name:"maxPrice"}].forEach(n=>{let i=document.querySelector(`[di-filter="price-${n.str}"]`),a=parseInt(e[n.name].replace(/\D/g,""));t.#Z[n.str]=a,isNaN(a)||(i.value=r.format(a))}),[{str:"from",name:"minYield"},{str:"to",name:"maxYield"}].forEach(r=>{let n=document.querySelector(`[di-filter="yield-${r.str}"]`),i=parseFloat(e[r.name].replace(/[^\d,]+/g,"").replace(",","."));t.#X[r.str]=i,isNaN(i)||(n.value=i.toFixed(2).replace(".",",")+" %")}),e.assets.split(",").forEach(e=>{let t=document.querySelector(`[di-filter-type="${e}"]`);t||console.warn("Potential Error: filterView.ts -> #addUrlParamsData -> Click filter type buttons: input = ",t),t?.click()}),t.#en()}#eo(){let e=this.#B.zip,t=this.#B.city,r=this.#er,n=document.querySelector('[di-filter="location"]');n.value=""===e||null===e?this.#B.search:e+(""===t||null===t?"":" "+t),n.setAttribute("data-value",e||""),n.setAttribute("data-city-value",t||""),n.setAttribute("data-state-code-value",r||""),""!==r&&""===e&&""===t&&this.#es(this.#el(r))}#z(){let e;let t=this,r=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",maximumFractionDigits:0});function n(){null!==e&&clearTimeout(e),e=setTimeout(function(){t.#Y()},1e3*t.#t.suggestedSearchBufferTime)}this.#en=n;let i=this.#G;function a(){let e=document.querySelector('[di-filter="price-from"]'),r=document.querySelector('[di-filter="price-to"]'),i=document.querySelector('[di-filter="yield-from"]'),a=document.querySelector('[di-filter="yield-to"]'),o=document.querySelector('[di-filter="location"]');[e,r,i,a,o].forEach(e=>{e&&(e.value="")}),t.#Q.forEach(e=>document.querySelectorAll(`[di-filter-type="${e}"]`).forEach(e=>e.classList.remove("di-checked"))),t.#Q=[],o?.removeAttribute("data-value"),o?.removeAttribute("data-city-value"),o?.removeAttribute("data-state-code-value"),t.#J="",t.#K=t.#t.searchRadiusDefault,t.#Z.from=0,t.#Z.to=0,t.#X.from=0,t.#X.to=0,n()}i.forEach(e=>{e.onclick=a}),this.#ec(),this.#eu(),document.querySelector('[di-filter="sort"]')?.addEventListener("change",function(){t.#J=this.value,n()}),document.querySelector('[di-filter="radius"]')?.addEventListener("change",function(){r1||(t.#K=this.value.replace(/\D/g,""),n())}),["from","to"].forEach(e=>{let i=document.querySelector(`[di-filter="price-${e}"]`);i?.addEventListener("change",function(){let a=parseInt(i.value.replace(/\D/g,""));if(t.#Z[e]=a,n(),isNaN(a)){i.value="";return}i.value=r.format(a)})}),["from","to"].forEach(e=>{let r=document.querySelector(`[di-filter="yield-${e}"]`);r?.addEventListener("change",function(){let i=parseFloat(r.value.replace(/[^\d,]+/g,"").replace(",","."));if(t.#X[e]=i,n(),isNaN(i)){r.value="";return}r.value=i.toFixed(2).replace(".",",")+" %"})})}#ec(){let e=this,t=this.#en,r=document.querySelectorAll("[di-filter-type]");r.forEach((r,n)=>{let i=r.getAttribute("di-filter-type")?.toLowerCase()||"";r.addEventListener("click",function(){if(!r.hasAttribute("data-do-not-filter")){if(0>e.#Q.indexOf(i))r.classList.add("di-checked"),e.#Q.push(i);else{let t=e.#Q.indexOf(i);t>-1?(r.classList.remove("di-checked"),e.#Q.splice(t,1)):console.error(`filterView.ts: There has been an error deselecting the type-filter: "${i}"`)}t()}})})}#ei(){let e;let t=this;this.#n.filter=function(r=0,n=!1,i=()=>{}){null!==e&&clearTimeout(e),e=setTimeout(function(){t.#Y(r,n,i)},1e3*t.#t.suggestedSearchBufferTime)}}#eu(){let e;let t=this;this.#n.tryStateFilter=function(r=""){null!==e&&clearTimeout(e),e=setTimeout(function(){t.#er=r,t.#es(t.#el(r)),t.#Y()},1e3*t.#t.suggestedSearchBufferTime)}}#el(e){let t=e.split(",").map(e=>{let t;return(r3.forEach(r=>{r.code===e&&(t=r)}),t)?t.prettyName:" "}).join(", ").replace(/ , /g,"");return{prettyString:t="  (Bundesland)"==(t=1===e.split(",").length?t+" (Bundesland)":t+" (Bundesl\xe4nder)")?"":t,statesString:e}}#es(e){let t=document.querySelector('[di-filter="location"]');t&&(t.setAttribute("data-value",""),t.setAttribute("data-city-value",""),t.setAttribute("data-state-code-value",`${e.statesString}`),t.value=e.prettyString)}constructor(){this.#Q=[],this.#J="",this.#Z={from:NaN,to:NaN},this.#X={from:NaN,to:NaN},this.#er="",this.#o=0,this.#ee=0}},r4=new class{#x(e,t,r){let n=e.getAttribute("data-search-path")||"/rendite",i=e.closest("form"),a=i?.querySelector('[finder="submit"]');e.setAttribute("suggested-search","input-"+r),r0.init(t,`[suggested-search="input-${r}"]`,!0,!0);let o=!1;i?.querySelector('[finder="germany-wide"]')?.querySelector("input")?.addEventListener("click",function(){o=!o});let s={};["pflegeimmobilien","renditeimmobilien","denkmalimmobilien","ferienimmobilien","studentenimmobilien"].forEach((e,t)=>{let r=i?.querySelector(`[finder="${e}"]`)?.querySelector("input");r?.addEventListener("click",function(){!0===s[e]?s[e]=!1:s[e]=!0})}),a?.addEventListener("click",function(){a.innerHTML=a.getAttribute("data-waiting-text")||"Einen Moment bitte...";let e=o?"":i?.querySelector('[finder="states"]').value||"",t=o?"":i?.querySelector(`[suggested-search="input-${r}"]`).getAttribute("data-value")||"",l=o?"":i?.querySelector(`[suggested-search="input-${r}"]`).getAttribute("data-city-value")||"",c=[];Object.entries(s).forEach(e=>{!0===e[1]&&c.push(e[0])});let u=parseInt(i?.querySelector('[finder="yield-from"]').value.replace(/\D/g,"")||0),d=parseInt(i?.querySelector('[finder="price-to"]').value.replace(/\D/g,"")||0);u=0===u?"":u,d=0===d?"":d;let h=n+"?bundeslaender="+e+"&plz="+t+"&stadt="+l+"&art="+c.join(",")+"&zins-von="+u+"&preis-bis="+d;location.href=h})}init(e){this.#t=e.styles,this.#r=e.objects,this.#n=e.handlers,this.#i={searchInputs:document.querySelectorAll('[suggested-search="input"]')},this.#i.searchInputs.forEach((t,r)=>{this.#x(t,e,r)})}#t;#i;#r;#n;#B},r9=new class{init(e){let t=document.querySelector('[di="global-config"]'),r=document.querySelector('[filters="loading-lottie-wrapper"]'),n=document.querySelector(".c-no-items-found-msg-text"),i=document.querySelector('[di-filter="parent-component"]'),a=document.querySelectorAll('[di-objects="list"]'),o=e.handlers,s=parseFloat(t?.getAttribute("data-loading-wheel-fade-in-out-time")||"0.2"),l=parseFloat(t?.getAttribute("data-loading-wheel-stay-min-time")||"1.1"),c=!1,u=!1;o.showLoadingWheel=function(){c=!0,u=!1,setTimeout(function(){c=!1,u&&o.tryHideLoadingWheel(!0)},(s+l)*1e3),gsap.to(r,{opacity:1,display:"block",duration:s}),n?.classList.add("di-filter-list-load"),i?.classList.add("di-filter-list-load"),a.forEach(e=>e.classList.add("di-filter-list-load"))},o.tryHideLoadingWheel=function(e=!1){e||(u=!0),(!e||u)&&(e||!c)&&(gsap.to(r,{opacity:0,display:"none",duration:s}),n?.classList.remove("di-filter-list-load"),i?.classList.remove("di-filter-list-load"),a.forEach(e=>e.classList.remove("di-filter-list-load")))}}},r6=new class{initHomeView(e){r0.init(e)}initObjectSearchView(e){r9.init(e),rQ.init(e),rG.init(e),r5.init(e)}initFinder(e){r4.init(e)}};const r7=async function(){try{let e=window.location.pathname;rU(e),window.MainJsState=rF.data,"/"===e&&r6.initHomeView(rF.data),e.includes(rF.data.styles.objectSearchPathBase)&&(await rW(window.location.search,rF.data.elements.objectLists.length),r6.initObjectSearchView(rF.data)),r6.initFinder(rF.data)}catch(e){console.log(`Msg: ${e}`)}};!function(e){function t(){"undefined"==typeof ls?r$("https://cdn.jsdelivr.net/npm/localstorage-slim",r):r()}function r(){r$("https://cdn.jsdelivr.net/gh/wf-02100/distribution@main/ScrollToPlugin.min.js",e)}"undefined"==typeof gsap?r$("https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js",t):t()}(function(){r7()});})()
